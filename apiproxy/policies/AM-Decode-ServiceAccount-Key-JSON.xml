<AssignMessage name='AM-Decode-ServiceAccount-Key-JSON'>
  <AssignVariable>
    <Name>b64-encoded-secret</Name>
    <Value>BADDBEEF</Value>
    <Template>{jsonPath('$.payload.data',secretResponse.content)}</Template>
  </AssignVariable>
  <AssignVariable>
    <!-- using the private prefix for this variable prevents this from being displayed in trace -->
    <Name>private.plaintext-sakeyjson</Name>
    <Template>{decodeBase64(b64-encoded-secret)}</Template>
  </AssignVariable>
  <AssignVariable>
    <!-- omitting the private prefix for this variable means it will be showed in Trace -->
    <Name>plaintext-sakeyjson</Name>
    <Template>{decodeBase64(b64-encoded-secret)}</Template>
  </AssignVariable>
</AssignMessage>
