<ServiceCallout name='SC-Post-Google-OAuth-to-obtain-IDToken-via-JWT-Bearer-Grant'>
  <Request>
    <Set>
      <Headers>
        <Header name='content-type'>application/x-www-form-urlencoded</Header>
      </Headers>
      <FormParams>
        <FormParam name='grant_type'>urn:ietf:params:oauth:grant-type:jwt-bearer</FormParam>
        <FormParam name='assertion'>{jwt-bearer-assertion}</FormParam>
      </FormParams>
      <Verb>POST</Verb>
    </Set>
  </Request>
  <Response>idTokenResponse</Response>
  <HTTPTargetConnection>
    <SSLInfo>
      <Enabled>true</Enabled>
      <Enforce>true</Enforce>
      <IgnoreValidationErrors>false</IgnoreValidationErrors>
    </SSLInfo>
    <Properties>
      <Property name='success.codes'>2xx, 3xx</Property>
    </Properties>
    <URL>https://oauth2.googleapis.com/token</URL>
  </HTTPTargetConnection>
</ServiceCallout>
